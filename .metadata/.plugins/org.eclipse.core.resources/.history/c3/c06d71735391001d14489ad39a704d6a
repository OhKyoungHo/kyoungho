package com.example.persistence;

import java.util.List;


import org.springframework.data.jpa.repository.Query;
import org.springframework.data.repository.CrudRepository;


import com.example.domain.WishListVO;

public interface WishListRepository extends CrudRepository<WishListVO, Integer>{

	@Query(value="SELECT e.ed_pic AS pic, e.ed_title AS title, e.ed_price, e.ed_start_date, e.ed_end_date, e.ed_id, w.w_id, w.m_id\r\n"
			+ "FROM education e inner join wishlist w\r\n"
			+ "ON e.ed_id = w.ed_id\r\n"
			+ "WHERR w.m_id=?"
			+ "ORDER BY w.w_id DESC", nativeQuery=true)
	List<WishListVO> getWishList(WishListVO vo);

	//Optional<WishListVO> findByMemId(MemberVO memId);
	
	
	@Query(value="INSERT INTO wishlist (w_id, m_id, ed_id) VALUES(nextval(w_id_seq), ?1, ?2)", nativeQuery=true)
	void insertWish(String memId, Integer edId);
	
//	@Query(value="DELETE FROM wishlist WHERE w_id=?1", nativeQuery=true)
//	void deleteWish(Integer wId);

	@Query(value="SELECT w_id FROM wishlist WHERE m_id=?1 AND ed_id=?2", nativeQuery=true)
	WishListVO getWish(MemberVO memId, EducationVO edId);
	
	
//	void  deleteByEdIdAndMemId(Integer edId, String memId);
//		
	
}
